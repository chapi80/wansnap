<!DOCTYPE html>
<html lang='ja'>

{% extends "app/base.html" %}

{% block title %}ãƒ›ãƒ¼ãƒ ç”»é¢ - ãƒ¯ãƒ³ã‚¹ãƒŠãƒƒãƒ—{% endblock %}

{% block content %}
    <h2>ğŸ ãƒ›ãƒ¼ãƒ ğŸ </h2>

    <button type = "button" onclick="location.href='{% url 'create_post' %}'">ã†ã¡ã®å­æŠ•ç¨¿</button>
    
    <form method="get" action="{% url 'home' %}">
        <input type="text" name="q" placeholder="çŠ¬ç¨®ã‚„æœˆé½¢ãªã©ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›">
        <button type="submit" aria-label="æ¤œç´¢">ğŸ”</button>
    </form>

    <label>
        <input type="radio" name="sort" valeu="new" {% if request.GET.sort == 'new' or not request.GET.sort %}checked{% endif %}>
        æ–°ã—ã„é †
    </label>
        
    <label>
        <input type="radio" name="sort" valeu="old" {% if request.GET.sort == 'old' %}checked{% endif %}>
        å¤ã„é †
    </label>
    
    <div class="post-list">
        {% for post in posts %}
            <div class="post">
                <img src="{{ post.dog_image.url }}" alt="æŠ•ç¨¿ç”»åƒ" class="post-image" onclick="openModal('{{ post.id }}')">
            </div>
        {% empty %}
            <p>ã¾ã æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“</p>
        {% endfor %}
    </div>

    <div id ="postModal" class="modal" style="display: none;">
        <div clss="modal-content"
            <span class="close">&times;</span>
            <img id="modal-image" src="" akt="æŠ•ç¨¿ç”»åƒ" style="width: 100%;">
            <p id="modal-caption"></p>
        </div>
    </div>

    <script>
        function openModal(postId){

            const img = document.querySelector(`img[data-post-id='${postId}']`);
            const caption = img.getAttribute('data-caption');

            document.getElemntById('modal-image').src = imag.src;
            document.getElemntById('modal-caption').textContent = caption;
            document.getElemntById('postModal').style.display = "block";
        }

        document.addEventListener('DOMContentLoaded', function (){
            const modal = document.getElemntById('postModal');
            const closeBtn = modal.querySelector('.close');

            closeBtn.onclick = function () {
                modal.style.display = "none";
            }

        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        });
    </script>
    
{% endblock %}
    