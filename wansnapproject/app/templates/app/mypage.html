<!DOCTYPE html>
<html lang='ja'>

{% extends "app/base.html" %}
{% load static %}

{% block title %}マイページ画面 - ワンスナップ{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'app/mypage.css' %}">
{% endblock %}

{% block content %}
    <h2>🐶マイページ🐶</h2>

    <h4>うちの子一覧</h4>

        <ul>
            {% for dog in dogs %}
                <li>
                    <a href="{% url 'dog_detail' dog.id %}">{{ dog.dog_name }}の部屋</a>
                </li>
            
            {% empty %}
                <li>まだ登録されていません</li>
            
            {% endfor %}
        </ul><br><br>

        <a href="{% url 'create_post' %}">
            <button type = "button">うちの子投稿</button>
        </a><br><br>

        <a href="{% url 'favorite_list' %}">
            <button type = "button">お気に入り一覧</button>
        </a><br><br>

        <a href="{% url 'add_dog' %}">
            <button type = "button">うちの子新規追加</button>
        </a><br><br>

        <button id = "openUserEditModal" type = "button">
            ユーザー登録変更
        </button><br><br>

        <div id = "userEditModal" class="modal hidden">
            <div class = "modal-content">
                <span id="closeModalButton" class="close-btn">&times;</span>

                <h2>何を変更しますか？</h2>
                <ul>
                    <li>
                        <a href="{% url 'edit_user_email' %}">メールアドレス変更</a>
                    </li>
                    <li>
                        <a href="{% url 'edit_user_password' %}">パスワード変更</a>
                    </li>
                </ul>
            </div>
        </div>       
{% endblock %}

{% block script %}
    {{ block.super }}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const openBtn = document.getElementById("openUserEditModal");
            const modal = document.getElementById("userEditModal");
            const closeBtn = document.getElementById("closeModalButton");

            if (openBtn && modal && closeBtn) {
                openBtn.addEventListener("click", function () {
                    modal.classList.remove("hidden");
                });

                closeBtn.addEventListener("click", function () {
                    modal.classList.add("hidden");
                });

                modal.addEventListener("click", function (e) {
                    if (e.target === modal){
                        modal.classList.add("hidden");
                    }
                });
            }
        });
    </script>
{% endblock %}